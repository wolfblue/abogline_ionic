(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Ildh:function(e,n,t){"use strict";t.r(n),t.d(n,"AgendarPageModule",function(){return m});var a=t("ofXK"),o=t("3Pt+"),i=t("TEn/"),s=t("tyNb"),c=t("1G5W"),r=t("XNiG"),p=t("AytR"),d=t("fXoL"),l=t("tk/3"),b=t("JqCM");function g(e,n){if(1&e&&(d.Pb(0,"option",9),d.Hc(1),d.Ob()),2&e){const e=d.cc().$implicit;d.kc("value",e.id),d.yb(1),d.Ic(e.id)}}function u(e,n){if(1&e&&(d.Nb(0),d.Fc(1,g,2,2,"option",8),d.Mb()),2&e){const e=n.$implicit;d.yb(1),d.jc("ngIf","registrado"!=e.estado)}}const f=[{path:"",component:(()=>{class e{constructor(e,n){this.http=e,this.spinner=n,this.unsubscribe$=new r.a,this.casos=[],this.pagosPendientes=[],this.getInfoPage()}ngOnInit(){$("#fechaAgendar").prop("min",(new Date).toISOString().split("T")[0]+"T00:00:00")}postModel(e,n){return this.http.post(""+p.a.apiUrl+e,n)}getInfoPage(){var e=this;let n=new FormData;n.append("usuario",sessionStorage.getItem("usuario")),n.append("perfil",sessionStorage.getItem("perfil")),e.postModel("apiAboglineAgendarGetInfo",n).pipe(Object(c.a)(e.unsubscribe$)).subscribe(n=>{n.length>0&&(e.casos=n[0].casos,e.pagosPendientes=n[0].pagosPendientes)})}agendar(){var e=this,n=0,t="";$("#idCaso").val()||(n=1,t="Es obligatorio seleccionar el caso"),$("#fechaAgendar").val()||(n=1,t="Es obligatorio seleccionar la fecha de la agenda");for(var a=0;a<e.pagosPendientes.length;a++)e.pagosPendientes[a].id_caso==$("#idCaso").val()&&(n=1,t="El caso tiene un pago pendiente por lo tanto no se puede a\xfan realizar agendamientos");if(0==n){let n=new FormData;n.append("idCaso",$("#idCaso").val()),n.append("perfil",sessionStorage.getItem("perfil")),n.append("fechaAgendar",$("#fechaAgendar").val()),n.append("usuario",sessionStorage.getItem("usuario")),e.postModel("apiAboglineAgendar",n).pipe(Object(c.a)(e.unsubscribe$)).subscribe(e=>{window.location.href="/home"})}1==n&&$("#mensaje").html(t)}}return e.\u0275fac=function(n){return new(n||e)(d.Kb(l.a),d.Kb(b.c))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-agendar"]],decls:19,vars:2,consts:[[3,"fullscreen"],[1,"contenido"],["id","idCaso"],["value",""],[4,"ngFor","ngForOf"],["type","datetime-local","step","2","id","fechaAgendar"],[3,"click"],["id","mensaje"],[3,"value",4,"ngIf"],[3,"value"]],template:function(e,n){1&e&&(d.Pb(0,"ion-content",0),d.Pb(1,"div",1),d.Pb(2,"h3"),d.Hc(3,"Agendar"),d.Ob(),d.Pb(4,"div"),d.Pb(5,"p"),d.Hc(6,"Seleccionar caso (*):"),d.Ob(),d.Pb(7,"select",2),d.Pb(8,"option",3),d.Hc(9,"- Seleccionar -"),d.Ob(),d.Fc(10,u,2,1,"ng-container",4),d.Ob(),d.Ob(),d.Pb(11,"div"),d.Pb(12,"p"),d.Hc(13,"Seleccionar fecha de reuni\xf3n a solicitar (*):"),d.Ob(),d.Lb(14,"input",5),d.Ob(),d.Pb(15,"p"),d.Pb(16,"button",6),d.ac("click",function(){return n.agendar()}),d.Hc(17,"Agendar"),d.Ob(),d.Ob(),d.Lb(18,"p",7),d.Ob(),d.Ob()),2&e&&(d.jc("fullscreen",!0),d.yb(10),d.jc("ngForOf",n.casos))},directives:[i.d,o.g,o.h,a.m,a.n],styles:["button[_ngcontent-%COMP%]{margin-top:2%}p[_ngcontent-%COMP%]{margin-top:1%}#mensaje[_ngcontent-%COMP%]{color:red}"]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(n){return new(n||e)},imports:[[s.i.forChild(f)],s.i]}),e})(),m=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(n){return new(n||e)},imports:[[a.c,o.a,i.i,h]]}),e})()}}]);